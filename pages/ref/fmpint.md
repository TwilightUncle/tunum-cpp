---
title: fmpint - TunumCpp リファレンス
---

```cpp
namespace tunum
{
    // 実装クラス
    template <std::size_t Bytes, bool Signed = false>
    struct fmpint { ... };

    // 型エイリアス
    using int128_t = fmpint<(sizeof(std::uint64_t) << 1), true>;
    using int256_t = fmpint<(sizeof(std::uint64_t) << 2), true>;
    using int512_t = fmpint<(sizeof(std::uint64_t) << 3), true>;

    using uint128_t = fmpint<(sizeof(std::uint64_t) << 1), false>;
    using uint256_t = fmpint<(sizeof(std::uint64_t) << 2), false>;
    using uint512_t = fmpint<(sizeof(std::uint64_t) << 3), false>;
}
```

### fmpint のテンプレートパラメータ

- Bytes - 格納可能したい値の最大サイズを`byte`単位で指定します。例えば、最大ビット幅が 128 の整数は、16 (128 / 8) を指定します。
- Signed - 符号の有無を指定します。`true`とした場合符号あり整数となり、`false`とした場合は符号なし整数となります。

### fmpint の定義済み型エイリアス

-   int128_t - ビット幅が 128 ビットの符号あり整数です。  
    下記範囲の整数を扱うことができます。  
    `-170,141,183,460,469,231,731,687,303,715,884,105,728` ~ `170,141,183,460,469,231,731,687,303,715,884,105,727`
-   int256_t - ビット幅が 256 ビットの符号あり整数です。
-   int512_t - ビット幅が 512 ビットの符号あり整数です。
-   uint128_t - ビット幅が 128 ビットの符号なし整数です。  
    下記範囲の整数を扱うことができます。  
    `0` ~ `340,282,366,920,938,463,463,374,607,431,768,211,455`
-   uint256_t - ビット幅が 256 ビットの符号なし整数です。
-   uint512_t - ビット幅が 512 ビットの符号なし整数です。

## 概要

`tunum::fmpint`は組み込みの整数型には収まらないような、大きな値を扱うことのできる整数型です。

また、上記に加えて下記の特徴を持っています。

-   `int`型などの組み込みの整数と同様の演算子を適用することが可能です。
-   内部的なバイナリ表現は組み込みの整数型と同様で、ビット幅のみが異なる構造のため、ビット操作を直感的に行うことができます。
-   コンパイル時点で格納できる最大値が固定され、動的に追加で必要な領域を確保することはありません。  
    計算の過程で格納可能な最大値を超過した場合はあふれた上位ビットが切り捨てられます。
-   テンプレートパラメータにより、任意のサイズを指定できます。
-   `tunum::fmpint`のインスタンスおよび、すべてのメンバ関数をコンパイル時に使用できます。  
    ※サイズが大きいほど計算回数も多くなるため、コンパイル時は計算ステップ数の上限に注意が必要です。
-   内部実装を流用した、いくつかのビット操作用メンバ関数が用意されています。

なお、現状、浮動小数点型との演算は未定義です。

## 指定サイズと内部表現

`tunum::fmpint`はテンプレートパラメータ`Bytes`で格納可能な整数の最大ビット幅を決定します。  
この時、実装の都合上、内部表現のサイズは単純に`Bytes`ではなく、`Bytes`を格納可能な最も小さい 2 の n 乗バイトとなります。

例えば、下記 2 つの`tump::fmpint`は型として異なりますが、内部表現や整数としてのふるまいは全く同じで、どちらも 128 ビット符号あり整数として動作します。

- `tunum::fmpint<14, true>`
- `tunum::fmpint<16, true>`

また、内部表現の最小ビット幅は 64 であり、`Bytes`に 8 以下の値を指定しても、8 を指定した場合と同等の内部表現となり、64 ビット整数として動作します。  

## 異なるサイズの整数と二項演算、符号有無

各二項演算子に対して、式の結果型が下記表のとおりになります。  
また、組み込み整数型との二項演算も可能で、必ず`tunum::fmpint`が組み込み整数型より大きいサイズの型とみなされます。

| 二項演算子の種類 | 結果のサイズ | 結果の符号有無 |
| --- | --- | --- |
| 四則演算と剰余 | 両オペランドのうち、大きいほうのサイズ | 左オペランドの符号有無 |
| シフト演算を除く二項ビット演算 | 両オペランドのうち、大きいほうのサイズ | 左オペランドの符号有無 |
| シフト演算 | 左オペランドのサイズ | 左オペランドの符号有無 |
| 代入演算、複合代入演算 | 左オペランドのサイズ | 左オペランドの符号有無 |
| 比較演算 | bool | なし |

演算子についての詳細な説明は[{演算子|ref/fmpint/operators}]のページを参照ください。

## 詳細なリファレンス一覧

| 機能 | 概要 |
| --- | --- |
| [{整数リテラル|ref/fmpint/literals}] | `tunum::fmpint`の数値リテラルリファレンス。 |
| [{コンストラクタ|ref/fmpint/constructor}] | コンストラクタについてのリファレンス。組み込み整数や、異なるサイズと符合有無が渡された際の動作についても説明します。 |
| [{演算子|ref/fmpint/operators}] | `tunum::fmpint`に対して定義された演算子についてのリファレンスです。 |
| [{ビット操作|ref/fmpint/bit}] | `tunum::fmpint`が持つ、ビット操作用に定義されたメンバ関数のリファレンスです。 |
| [{型キャスト|ref/fmpint/cast}] | `tunum::fmpint`から、組み込み関数などの異なる型への型キャストのリファレンスです。 |
| [{メタ関数・コンセプト|ref/fmpint/concepts}] | `tunum::fmpint`に関連する型判定や、コンセプトについてのリファレンスです。 |
